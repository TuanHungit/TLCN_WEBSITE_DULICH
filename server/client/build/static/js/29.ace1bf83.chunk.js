(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[29],{606:function(e,t,n){"use strict";n.r(t);var a=n(84),i=n(3),r=n(1),l=n.n(r),c=n(125),s=n(79),o=n(77),u=n(150),b=n(82),d=n(80),f=n(87),p=n(569),j=n.n(p),h=(n(587),n(4)),m=!!navigator.userAgent.match(/Trident/i),g=p.Quill.import("blots/block/embed"),O=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,null,[{key:"create",value:function(e){var t=Object(u.a)(Object(b.a)(n),"create",this).call(this);return t.setAttribute("src",e.src),t.setAttribute("alt",e.alt),t.setAttribute("width","100%"),t}},{key:"value",value:function(e){return{src:e.getAttribute("src"),alt:e.getAttribute("alt")}}}]),n}(g);O.blotName="image",O.tagName="img",p.Quill.register(O);var v=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,null,[{key:"create",value:function(e){if(e&&e.src){var t=Object(u.a)(Object(b.a)(n),"create",this).call(this);return t.setAttribute("src",e.src),t.setAttribute("title",e.title),t.setAttribute("width","100%"),t.setAttribute("controls",""),t}var a=document.createElement("iframe");return a.setAttribute("src",e),a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen",!0),a.setAttribute("width","100%"),a}},{key:"value",value:function(e){return e.getAttribute("title")?{src:e.getAttribute("src"),alt:e.getAttribute("title")}:e.getAttribute("src")}}]),n}(g);v.blotName="video",v.tagName="video",p.Quill.register(v);var x=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,null,[{key:"create",value:function(e){var t=document.createElement("span");t.innerText="\ucca8\ubd80\ud30c\uc77c - ";var a=document.createElement("b");a.innerText=e;var i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("target","_blank"),i.setAttribute("className","file-link-inner-post"),i.appendChild(a);var r=Object(u.a)(Object(b.a)(n),"create",this).call(this);return r.appendChild(t),r.appendChild(i),r}},{key:"value",value:function(e){return e.querySelector("a").getAttribute("href")}}]),n}(g);x.blotName="file",x.tagName="p",x.className="file-inner-post",p.Quill.register(x);var y=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,null,[{key:"create",value:function(e){var t=document.createElement("span");t.innerText="\ud22c\ud45c - ";var a=document.createElement("b");a.innerText=e.title;var i=Object(u.a)(Object(b.a)(n),"create",this).call(this);return i.setAttribute("id",e.id),i.appendChild(t),i.appendChild(a),i}},{key:"value",value:function(e){return{id:e.getAttribute("id"),title:e.querySelector("b").innerText}}}]),n}(g);y.blotName="poll",y.tagName="p",y.className="poll-inner-post",p.Quill.register(y);var N=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChange=function(e){console.log("html",e),a.setState({editorHtml:e},(function(){a.props.onEditorChange(a.state.editorHtml)}))},a.imageHandler=function(){a.inputOpenImageRef.current.click()},a.videoHandler=function(){a.inputOpenVideoRef.current.click()},a.insertImage=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0],n=new FormData;n.append("file",t),h.a.post("/blogs/uploadfiles",n,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(!e.data.success)return alert("failed to upload file");var n=a.reactQuillRef.getEditor();n.focus();var i=n.getSelection(),r=i?i.index:0;n.insertEmbed(r,"image",{src:"http://localhost:3001/"+e.data.url,alt:e.data.fileName}),n.setSelection(r+1),a._isMounted&&a.setState({files:[].concat(Object(c.a)(a.state.files),[t])},(function(){a.props.onFilesChange(a.state.files)}))}))}},a.insertVideo=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0],n=new FormData;n.append("file",t),h.a.post("/blogs/uploadfiles",n,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(!e.data.success)return alert("failed to upload file");var n=a.reactQuillRef.getEditor();n.focus();var i=n.getSelection(),r=i?i.index:0;n.insertEmbed(r,"video",{src:"http://localhost:3001/"+e.data.url,title:e.data.fileName}),n.setSelection(r+1),a._isMounted&&a.setState({files:[].concat(Object(c.a)(a.state.files),[t])},(function(){a.props.onFilesChange(a.state.files)}))}))}},a.modules={toolbar:{container:"#toolbar",handlers:{insertImage:a.imageHandler,insertVideo:a.videoHandler}}},a.formats=["header","bold","italic","underline","strike","image","video","file","link","code-block","video","blockquote","clean"],a.state={editorHtml:m?"<p>&nbsp;</p>":"",files:[]},a.reactQuillRef=null,a.inputOpenImageRef=l.a.createRef(),a.inputOpenVideoRef=l.a.createRef(),a.inputOpenFileRef=l.a.createRef(),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{id:"toolbar",children:[Object(i.jsxs)("select",{className:"ql-header",defaultValue:"",onChange:function(e){return e.persist()},children:[Object(i.jsx)("option",{value:"1"}),Object(i.jsx)("option",{value:"2"}),Object(i.jsx)("option",{value:""})]}),Object(i.jsx)("button",{className:"ql-bold"}),Object(i.jsx)("button",{className:"ql-italic"}),Object(i.jsx)("button",{className:"ql-underline"}),Object(i.jsx)("button",{className:"ql-strike"}),Object(i.jsx)("button",{className:"ql-insertImage",children:"I"}),Object(i.jsx)("button",{className:"ql-insertVideo",children:"V"}),Object(i.jsx)("button",{className:"ql-insertFile",children:"F"}),Object(i.jsx)("button",{className:"ql-link"}),Object(i.jsx)("button",{className:"ql-code-block"}),Object(i.jsx)("button",{className:"ql-video"}),Object(i.jsx)("button",{className:"ql-blockquote"}),Object(i.jsx)("button",{className:"ql-clean"})]}),Object(i.jsx)(j.a,{ref:function(t){e.reactQuillRef=t},theme:"snow",onChange:this.handleChange,modules:this.modules,formats:this.formats,value:this.state.editorHtml,placeholder:this.props.placeholder}),Object(i.jsx)("input",{type:"file",accept:"image/*",ref:this.inputOpenImageRef,style:{display:"none"},onChange:this.insertImage}),Object(i.jsx)("input",{type:"file",accept:"video/*",ref:this.inputOpenVideoRef,style:{display:"none"},onChange:this.insertVideo})]})}}]),n}(l.a.Component),k=n(12),A=n.n(k);t.default=function(e){var t=Object(r.useState)(""),n=Object(a.a)(t,2),l=n[0],c=n[1],s=Object(r.useState)(""),o=Object(a.a)(s,2),u=o[0],b=o[1],d=Object(r.useState)([]),f=Object(a.a)(d,2),p=(f[0],f[1]),j=function(t){t.preventDefault(),b("");var n={content:u,title:l};console.log(n),h.a.post("/blogs",n).then((function(t){t&&(A.a.success("Post Created!"),setTimeout((function(){e.history.push("/blog")}),2e3))})).catch((function(e){console.log(e)}))};return Object(i.jsx)("div",{className:"body-inner",children:Object(i.jsx)("div",{class:"main-wrapper scrollspy-container",children:Object(i.jsx)("section",{class:"page-wrapper page-detail pt-100",style:{backgroundColor:"#f3f3f3"},children:Object(i.jsxs)("div",{style:{maxWidth:"1000px",margin:"1rem auto"},children:[Object(i.jsx)("div",{style:{textAlign:"center"},children:"T\u1ea1o Blog"}),Object(i.jsx)("label",{children:"Ti\xeau \u0111\u1ec1:"}),Object(i.jsx)("input",{placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 blog",onChange:function(e){return c(e.target.value)}}),Object(i.jsx)(N,{placeholder:"Start Posting Something",onEditorChange:function(e){b(e),console.log(u)},onFilesChange:function(e){p(e)}}),Object(i.jsx)("form",{onSubmit:j,children:Object(i.jsx)("div",{style:{textAlign:"center",margin:"2rem"},children:Object(i.jsx)("button",{type:"submit",className:"btn",onSubmit:j,children:"Submit"})})})]})})})})}}}]);
//# sourceMappingURL=29.ace1bf83.chunk.js.map